.prose {

	padding-inline:0;
	overflow-x: hidden;

	/* Layout */

  display: grid;
  grid-template-columns: 1fr min(var(--measure), calc(100% - var(--gutter) * 2)) 1fr;
  grid-column-gap: var(--gutter);
  --image-max-width: 1180px;
	/* ^ if editing the width, remember to change the width of 
	the corresponding @media query at bottom of page */

  > *, .no-bleed {
  	grid-column: 2;
	}

	.full-bleed {
    width: 100%;
    grid-column: 1 / -1;
		/* padding-inline: 0;*/
	}

	> figure {
	  margin-inline: auto;
	  width: 100%;
	  grid-column:1 / -1;
	}

	/* Spacing */

	& h2 {
		margin-block-end:var(--space-s);
		&:not(:first-child) {
			margin-block-start:var(--space-2xl);
		}
	}

	& h3 {
    margin-block-end:var(--space-xs);
    &:not(:first-child) {
			margin-block-start:var(--space-xl);
		}
	}

	& h4 {
    margin-block-end:var(--space-2xs);
    &:not(:first-child) {
			margin-block-start:var(--space-m);
		}
	}

	& p + p {
		margin-block-start:var(--space-xs);
		/*text-indent: 1.5em;*/
	}

	> figure:not(:first-child), figure + p {

		margin-block-start: var(--space-xl);

		&.no-bleed, &.no-bleed + p {
			margin-block-start: var(--space-l);
		}
	}

	& dl.details {
		margin-block-start: var(--space-xl-2xl);
	}

	& .gallery {
		margin-block-start: var(--space-xl);
	}

	/* Media */

	& figure {

		& img, & video, .frame {
			width: 100%;
	    max-width: var(--image-max-width);
	    margin-inline: auto;
	    border-radius:var(--radius-l);
		}

		.frame {
			padding: var(--space-m-xl) var(--space-m-2xl);
			background-color: var(--gray-bgd);

			&:is(.no-bleed > *) {
				padding: var(--space-s-l);
			}

			.screen {
				border-radius:var(--radius-m);
				box-shadow:
				  0.9px 0.7px 2.2px rgba(var(--shadow-value), 0.02),
				  2.1px 1.8px 5.3px rgba(var(--shadow-value), 0.028),
				  3.9px 3.4px 10px rgba(var(--shadow-value), 0.035),
				  6.9px 6px 17.9px rgba(var(--shadow-value), 0.042),
				  13px 11.3px 33.4px rgba(var(--shadow-value), 0.05),
				  31px 27px 80px rgba(var(--shadow-value), 0.07)
				;
				&:is(.two-col > *), &:is(.no-bleed *) {
					border-radius: var(--radius-s);
				}
			}

			&.grid {
				display: grid;
				&.two-col {
					grid-template-columns: repeat(2, 1fr);
					grid-gap: var(--space-m-l);
				}
				&.three-col {
					grid-template-columns: repeat(3, 1fr);
					grid-gap: var(--space-s-xl);
				}
			}

			&.mobile {
				> div {
			  	position: relative;
				  aspect-ratio: 405 / 842 !important;
			  }

				/* Style device frame */
			  .device {
			  	width: 100%;
				  height: 100%;
				  z-index: 999;
				  position: absolute;
				  top: 0;
				  left: 0;
				  box-shadow: none;
			  }

				/* Style image */
			  .screen {
			  	z-index: 900;
				  margin: 1.1%;
				  padding: 2.1%;
				  width: 97.9%;
				  aspect-ratio: 395 / 832 !important;
				  border-radius: 16% / 8%;
			  }
			}
		}
	}

	& figcaption {
    font-size: var(--step--1);
    margin-block-start: var(--space-xs);
    margin-inline: auto;
    display: flex;
    position:relative;

		&:not(.no-bleed *, .two-col *) {
    	max-inline-size: min(var(--measure), calc(100% - var(--space-m-l) * 2));
    }

		& p:first-child:before {
	    content: "â–²";
	    color: var(--gray-12);
	    font-size: 0.8em;
	    margin: 0 0.5em 0 0.25em;
		}
	}

	.gallery {
		& figure {
	    -moz-column-break-inside: avoid;
	    break-inside: avoid;
	    margin-block-end: var(--space-xl);
		}
		&.two-col {
	    -moz-columns: 2;
	    columns: 2;
	    -moz-column-gap: var(--space-xl);
	    column-gap: var(--space-xl);
		}
	}


	/* Details */

	& dl.details {
		display: flex;
		flex-direction: column;
		padding: var(--space-m);
		gap: var(--space-s);
		border: 1px solid var(--border);
		border-radius:var(--radius-l);

		> div {
			display: flex;
			flex-direction: row;
			gap: var(--space-4xs);
			flex-wrap: wrap;

			> dt {
				width: 180px;
				font-weight: 550;
			}

			> dd {
				flex: 1;
				min-inline-size: 400px;
				font-weight: 400;
			  -webkit-font-smoothing: antialiased;
			  color: var(--gray-11);
			}
		}
	}
}

/* Make full width image corners not rounded once @ full width of screen */

@media (width <= 1180px) {
  .prose figure:not(.no-bleed, .two-col *) {
		& img, video, .frame {
			border-radius:0;
		}
	}
}

/* Adjust gallery grid from 2 col to 1 col on mobile */

@media (width < 400px) {
  .prose .gallery.two-col {
    -moz-columns: 1;
    columns:1
  }
}